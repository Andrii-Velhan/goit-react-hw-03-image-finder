(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{21:function(e,t,n){},22:function(e,t,n){},24:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),c=n.n(r),o=n(7),i=n.n(o),s=(n(21),n(3)),l=n(4),u=n(6),h=n(5),m=n(8),d=(n(22),n(13)),j=(n(23),n(24),function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={name:""},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(d.a)({},a,r))},e.handleSubmit=function(t){t.preventDefault();var n=e.state.name;""===n.trim()?m.b.error("Enter data !!!"):(e.props.onSubmit(n),e.setState({name:""}))},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("header",{className:"Searchbar",children:Object(a.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmit,children:[Object(a.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(a.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(a.jsx)("input",{className:"SearchForm-input",type:"text",name:"name",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:this.state.name,onChange:this.handleChange})]})})})}}]),n}(r.Component));j.defaultProps={};var f=j,b=n(9),p=n.n(b),g=n(11),v=n(12);var O={fetchImg:function(e,t){var n="".concat("https://pixabay.com/api/","/?q=").concat(t,"&page=").concat(e,"&key=").concat("19199733-53a137615acbd00e25277177c","&image_type_type=photo&orientation=horizontal&per_page=").concat(12);return fetch(n).then((function(e){return e.ok?e.json():Promise.reject(new Error("Image ".concat(t," not found!")))}))}};n(26),n(27);var y=function(e){var t=e.id,n=e.src,r=e.alt,c=e.url,o=e.onClickItem;return Object(a.jsx)("li",{className:"ImageGalleryItem",children:Object(a.jsx)("img",{src:n,alt:r,className:"ImageGalleryItem-image",onClick:function(){return o({url:c,alt:r})}})},t)},x=n(14),w=n.n(x),k=(n(48),n(49),document.querySelector("#modal-root")),S=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleBackdropClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(o.createPortal)(Object(a.jsx)("div",{className:"Overlay",onClick:this.handleBackdropClick,children:Object(a.jsx)("div",{className:"Modal",children:this.props.children})}),k)}}]),n}(r.Component),C=n(15),I=(n(50),function(e){var t=e.onLoadMore;return Object(a.jsx)("div",{className:"Button-container",children:Object(a.jsx)("button",{className:"Button",type:"button",onClick:t,children:"Load more"})})}),F="idle",N="pending",M="resolved",L="rejected",q=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={item:[],error:null,status:F,page:1,per_page:12,showModal:!1,largeImage:{url:"",alt:""}},e.fetch=function(t){var n=e.state.page;O.fetchImg(n,t).then((function(t){var n=t.hits;if(0===n.length)return Promise.reject(new Error("Images not found!"));e.setState((function(e){return{item:[].concat(Object(v.a)(e.item),Object(v.a)(n)),status:M}}))})).catch((function(t){return e.setState({error:t,status:L})}))},e.handleBtnClick=Object(g.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.query,t.next=3,e.incrementPage();case 3:e.fetch(n),e.onScroll();case 5:case"end":return t.stop()}}),t)}))),e.onScroll=function(){setTimeout((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}),1e3)},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.onClickItem=function(t){e.setState({largeImage:t}),e.toggleModal()},e.incrementPage=function(){e.setState((function(e){return{page:e.page+1}}))},e.reset=function(){e.setState({page:1,item:[],largeImage:{url:"",alt:""}})},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(){var e=Object(g.a)(p.a.mark((function e(t,n){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.query,r=this.props.query,a===r){e.next=7;break}return e.next=5,this.reset();case 5:this.setState({status:N}),this.fetch(r);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.item,r=t.error,c=t.status,o=t.showModal,i=t.largeImage;return"idle"===c?Object(a.jsx)(a.Fragment,{}):"pending"===c?Object(a.jsx)("div",{className:"Loader",children:Object(a.jsx)(w.a,{type:"Puff",color:"#00BFFF",height:200,width:200,timeout:3e3})}):"rejected"===c?m.b.error("".concat(r.message)):"resolved"===c?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("ul",{className:"ImageGallery",children:n.map((function(t){var n=t.id,r=t.webformatURL,c=t.largeImageURL,o=t.tags;return Object(a.jsx)(y,{src:r,url:c,alt:o,onClickItem:e.onClickItem},n)}))}),o&&Object(a.jsxs)(S,{image:i,onClose:this.toggleModal,children:[Object(a.jsx)(C.a,{className:"btn-close",type:"button",onClick:this.toggleModal}),Object(a.jsx)("img",{src:i.url,alt:i.alt})]}),Object(a.jsx)(I,{onLoadMore:this.handleBtnClick})]}):void 0}}]),n}(r.Component),B=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={query:""},e.handleFormSubmit=function(t){e.setState({query:t})},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(f,{onSubmit:this.handleFormSubmit}),Object(a.jsx)(q,{query:this.state.query}),Object(a.jsx)(m.a,{autoClose:2500})]})}}]),n}(r.Component),P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(B,{})}),document.getElementById("root")),P()}},[[51,1,2]]]);
//# sourceMappingURL=main.79d2739b.chunk.js.map